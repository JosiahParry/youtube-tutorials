<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-99.9.9">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>youtube-tutorials – script</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
</head>
<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">
      youtube-tutorials
      </li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">youtube-tutorials</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../about.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dots/slides.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dots …</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../geohash/script.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Geohash script</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../geohash/slides.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Geohash slides</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../simple-features/script.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Simple Features</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../s3-generics/slides.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">S3 Generics (slides)</span></a>
  </div>
</li>
    </ul>
</div>
    <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li>
<a href="#dockerfile" id="toc-dockerfile" class="nav-link active" data-scroll-target="#dockerfile"><code>Dockerfile</code></a>
  <ul class="collapse">
<li><a href="#from" id="toc-from" class="nav-link" data-scroll-target="#from"><code>FROM</code></a></li>
  <li><a href="#run" id="toc-run" class="nav-link" data-scroll-target="#run"><code>RUN</code></a></li>
  <li><a href="#copy" id="toc-copy" class="nav-link" data-scroll-target="#copy"><code>COPY</code></a></li>
  <li><a href="#entrypoint" id="toc-entrypoint" class="nav-link" data-scroll-target="#entrypoint"><code>ENTRYPOINT</code></a></li>
  </ul>
</li>
  <li>
<a href="#docker-images-building-them" id="toc-docker-images-building-them" class="nav-link" data-scroll-target="#docker-images-building-them">Docker Images &amp; building them</a>
  <ul class="collapse">
<li><a href="#naming-docker-images" id="toc-naming-docker-images" class="nav-link" data-scroll-target="#naming-docker-images">Naming Docker images</a></li>
  <li><a href="#builds-and-layers" id="toc-builds-and-layers" class="nav-link" data-scroll-target="#builds-and-layers">Builds and Layers</a></li>
  <li><a href="#tips-for-building" id="toc-tips-for-building" class="nav-link" data-scroll-target="#tips-for-building">Tips for building</a></li>
  </ul>
</li>
  <li><a href="#creating-your-container" id="toc-creating-your-container" class="nav-link" data-scroll-target="#creating-your-container">Creating your container</a></li>
  <li><a href="#using-docker-desktop" id="toc-using-docker-desktop" class="nav-link" data-scroll-target="#using-docker-desktop">Using Docker Desktop</a></li>
  <li><a href="#what-should-you-containerize" id="toc-what-should-you-containerize" class="nav-link" data-scroll-target="#what-should-you-containerize">What should you containerize?</a></li>
  <li><a href="#steps-for-data-scientists" id="toc-steps-for-data-scientists" class="nav-link" data-scroll-target="#steps-for-data-scientists">Steps for Data Scientists</a></li>
  <li><a href="#plumber-example" id="toc-plumber-example" class="nav-link" data-scroll-target="#plumber-example">Plumber Example</a></li>
  <li><a href="#flask-example" id="toc-flask-example" class="nav-link" data-scroll-target="#flask-example">Flask Example</a></li>
  </ul></nav>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><p>Title: Docker for Data Scientists</p>
<p>If you’ve been doing data science for long enough you’ve encountered Docker. Maybe you may have made a Docker container and didn’t really know what you were doing, or someone told you that you should make one, or you’re thinking about different strategies for putting your data science jobs into production. Either way, this video is for you.</p>
<p>As data scientists we make all sorts of things. You definitely made a pdf report, probably some pretty looking charts, maybe you even tuned a fancy machine learning model, or made an interacting web application to help your internal stakeholders explore their own data. For many of the things that data scientists make, it can be hard to get that thing you’ve built, I’ll refer to this as an artifact, off of your own machine. Whenever you’ve built something that you either want to automate or make available to other people or systems, Docker can likely help.</p>
<p>To understand Docker, it can be helpful to think about what kind of problems it solves. Lets work through an example: you’ve done a market segmentation analysis that you want your colleague to review. So you send her over your script and the data. She tries running it and it doesn’t work. Why? Well, think about all of the things that you didn’t send. Your script used additional packages to make the analysis easier. For one we can’t be sure that she has those packages or even the right version of those packages. And then, on top of that, some of those packages require an additional system level dependency which wasn’t captured. All of this leaves a lot of room for failure for when she tries to run your script.</p>
<p>Now let’s extend this example of your coworker’s computer, to a server. When we need to run things in production, that is almost always done on a server. Now when you send over your script to be ran on that server the same problem arises. Does that server have your packages? Does it have the right versions? And does it have the same system dependencies? What if there is another script already on the server that has to be ran but with an older version of the package you used and conflicts with the one you used? You can’t even run your script on that server if you wanted to because you’d break outstanding code.</p>
<p>One of the ways that we can solve this by using Docker. Docker creates what are called “containers.” If we over simplify, these containers are self <em>contained</em> computers. Containers are designed to be run just one application at a time. Since their jobs are narrow in scope, they should be very small and entirely self contained—I swear I’m not trying to use the word “contain” this much on purpose.</p>
<p>Docker containers have everything you need to run an application: from the operating system, to the programming languages an application might use, the code, as well as the libraries and packages needed to run it. What’s even better is that we define our Docker containers using code. So we can keep track of the container definitions using Git. This also makes sharing them very very easy.</p>
<p>Containers are super powerful because they can run on any operating system that is supported by the Docker engine. The Docker engine differs from virtual machines (VMs). VMs build a <em>complete</em> virtual machine with a copy of an operating system and everything. Docker on the other hand mostly fakes it. Each container shares the kernel from the underlying operating system. Hang with me here. I’m no computer hardware wiz but with a little bit of thinking we can all get there.</p>
<p><img src="images/paste-3.png" class="img-fluid"></p>
<p>The kernel, if I understand it correctly, is the core component of an operating system (OS). Each OS has one: MacOS, Windows, and Linux. The kernel is like the wizard behind the curtain handling everything from memory management, task handling, and communication between applications and the hardware. This means that each Docker container that you run, even if it is Ubuntu or Alpine Linux or whatever, is actually using the kernel from the machine running it. So you can create a Docker container with Ubuntu operating system that is running on your MacOS. Quite powerful! These containers can be picked up and moved from place to place so long as the computer it goes to is able to run the Docker engine.</p>
<p>So, how do we actually create Docker containers? Creating containers is done in three steps:</p>
<ol type="1">
<li>Write the <code>Dockerfile</code> which describes how it will be built</li>
<li>Create a <em>Docker Image</em> from that <code>Dockerfile</code>
</li>
<li>Create a container from the Docker Image.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="https://cto.ai/blog/docker-image-vs-container-vs-dockerfile"><img src="images/paste-1.png" class="img-fluid figure-img"></a></p>
</figure>
</div>
<section id="dockerfile" class="level2"><h2 class="anchored" data-anchor-id="dockerfile"><code>Dockerfile</code></h2>
<p>At the core, every Docker container is based on a <code>Dockerfile</code>. A <code>Dockerfile</code> is a plain text file that contains the set of instructions that define how the Docker image will be built. This includes things like the operating system it will use, copying any files that need to be included, or installing additional libraries. While I wouldn’t call Docker a programming language, it does have its own syntax that defines how these images get built.</p>
<p><code>Dockerfile</code>s are built up using <em>instructions.</em> Instructions are a number of reserved words written in all caps. If you understand just five of them you can get very very far. Let’s start with the most important one.</p>
<p>This is an example of a Dockerfile that will launch a REST API.</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning in readLines("docker-plumber/Dockerfile"): incomplete final line found
on 'docker-plumber/Dockerfile'</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># Step 1: Choose your base image FROM rocker/r-ver:4.3.0  # Step 2: Install your system dependencies RUN apt-get update -qq &amp;&amp; apt-get install -y --no-install-recommends \   libcurl4-openssl-dev \   libicu-dev \   libsodium-dev \   libssl-dev \   &amp;&amp; apt-get clean  # Step 3: Install R packages RUN Rscript -e "install.packages('plumber')" COPY plumber.R /api/plumber.R  # Start 4: Do something # Need to expose port for app EXPOSE 8000  ENTRYPOINT ENTRYPOINT ["R", "-e", "plumber::plumb('/api/plumber.R')$run(host = '0.0.0.0', port = 8000)"]  </code></pre>
</div>
</div>
<p>By the end of this video you’ll be able to understand, at least for the most part, what is happening in this Dockerfiler.</p>
<section id="from" class="level3"><h3 class="anchored" data-anchor-id="from"><code>FROM</code></h3>
<p><code>FROM</code> specifies from which Docker image you want to base yours on. It’s not expected of you to be able to build an entire Docker image from the ground up. People and organizations have already built many very useful Docker containers that have most of what you would already need. The rest of it is tailoring the container to your specific needs.</p>
<p>The <code>FROM</code> instruction simply requires you to type the name of the base image that you want to build on top of. These images are typically from something called a registry. It’s kind of like a Github but for Docker.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The most common and default of these is Docker hub. However each cloud provider has their own that you might want to use to deploy</p>
</div>
</div>
<p>The name of the Docker images follows the general format of <code>username/image-name:tag</code></p>
</section><section id="run" class="level3"><h3 class="anchored" data-anchor-id="run"><code>RUN</code></h3>
<p>This instruction is very important! It allows to run any shell command in the container. The results of the instruction persist throughout the remainder of the Docker image. <code>RUN</code> instructions are pivotal to enabling us to do things like install new libraries or configuring the image using a shell script.</p>
<p>Most importantly <code>RUN</code> will often be used to install system dependencies that you will need for your packages or other software.</p>
</section><section id="copy" class="level3"><h3 class="anchored" data-anchor-id="copy"><code>COPY</code></h3>
<p>The <code>COPY</code> instruction is very straight forward. I’m sure you already know what it does. Yup, it copies files from your operating system into the Docker image itself. It works much like the <code>cp</code> shell command. We use this to do things like copying the source of applications into the Docker container.</p>
</section><section id="entrypoint" class="level3"><h3 class="anchored" data-anchor-id="entrypoint"><code>ENTRYPOINT</code></h3>
<p>The <code>ENTRYPOINT</code> instruction is very consequential and frankly the most confusing of the bunch. In essence, it defines <em>what</em> the Docker container will actually <em>do</em> once it is spun up. If you know how to run an application using the command line for example by running <code>python3 app.py</code> or <code>Rscript app.R</code>.</p>
<p>To use <code>ENTRYPOINT</code> we provide an array of arguments that we provide to the shell. Each argument is quoted and is an element itself in the array. For example if we want to run a Flask app we will have <code>ENTRYPOINT ["python3", "/app/app.py"]</code>. Or if we want to run a Plumber API we use the following <code>ENTRYPOINT ENTRYPOINT ["R", "-e", "plumber::plumb('/api/plumber.R')$run(host = '0.0.0.0', port = 8000)"]</code>. This is more verbose but the idea is the same. We pass in the <code>R</code> executable and we use <code>-e</code> to execute a line of code. That line of code is the <code><a href="https://www.rplumber.io/reference/plumb.html">plumber::plumb()</a></code> function to launch the API.</p>
<p>Both of these <code>ENTRYPOINT</code>s will launch a web application that we can interact with. But there’s one other instruction that we need to familiarize ourselves with. Thats <code>EXPOSE</code>. Web applications, those build with Plumber, Flask, Shiny, or FastAPI for example, have to be able to “listen” or accept incoming requests on a specific port. You can see in the plumber example we are using port <code>8000</code> which is the same port that our flask app is using</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    app.run(host<span class="op">=</span><span class="st">'0.0.0.0'</span>, port<span class="op">=</span><span class="dv">8000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Because Docker always is as small as it can possibly be by default, no ports are available for it to listen to. We have to tell the image to <code>EXPOSE</code> a port with the <code>EXPOSE</code> instruction. Doing this will let us interact with the web applications that are in the Docker container.</p>
</section></section><section id="docker-images-building-them" class="level2"><h2 class="anchored" data-anchor-id="docker-images-building-them">Docker Images &amp; building them</h2>
<p>From the <code>Dockerfile</code> we can build a <strong>Docker Image</strong>. The Dockerfile contained the instructions, now we will build the image, or the template.</p>
<p>At this point, if you are following along and want to do this with me, you will need Docker available to you. Head over and download Docker Desktop open it up. The application will handle creating the cli tool for you. I also recommend getting the Docker extension for VS code. It makes the build process a lot easier.</p>
<p>We can begin the build process using the <code>docker build</code> command. From VS code open the Dockerfile you want to build and press <code>cmd + shift + p</code> to bring up the command prompt. Select <code>Docker Images: Build Image</code>. Choose the Dockerfile from the drop down. Then choose a name to give the docker image that you want.</p>
<section id="naming-docker-images" class="level3"><h3 class="anchored" data-anchor-id="naming-docker-images">Naming Docker images</h3>
<p>Docker images are somewhat like libraries themselves. We can build one and give it a name. But there can be different versions of the same image. We can denote these differences based on the tags. The name have the following structure <code>image-name:tag-value</code>. This is often helpful to keep track of versions of the Docker images you’ve built. There is also the concept of a <code>latest</code> image which is typically the most recent build.</p>
</section><section id="builds-and-layers" class="level3"><h3 class="anchored" data-anchor-id="builds-and-layers">Builds and Layers</h3>
<p>When a Docker image builds, it runs through the steps specified in the Dockerfile and executes them consecutively. Each one of these instructions will be stored in a <em>layer.</em> Layers keep track of the changes that each instruction made. It’s somewhat like a Git diff between each subsequent step. Each of these instructions are cached so that when they are run once, they do not need to be ran again.</p>
<p><img src="images/paste-2.png" class="img-fluid"></p>
<p>However, if you change an instruction, the cache gets invalidated from that point onward.</p>
</section><section id="tips-for-building" class="level3"><h3 class="anchored" data-anchor-id="tips-for-building">Tips for building</h3>
<p>We can take advantage of this caching by putting all of the long running stuff and things that are unlikely to change at the top of the docker image. For example in the plumber API Dockerfile we have to install a fair amount of system dependencies and that can take a long time. We put it at the top of the image so we do not have to run that if we change any thing else later on. It makes rebuilding and testing differences later on much much faster!</p>
</section></section><section id="creating-your-container" class="level2"><h2 class="anchored" data-anchor-id="creating-your-container">Creating your container</h2>
<p>Now that we’ve build the Docker image, we have a template to create our containers from. We’ve done the hard part.</p>
<p>Navigate to Docker desktop, then to images, then press the play button. This will start a docker container for you.</p>
</section><section id="using-docker-desktop" class="level2"><h2 class="anchored" data-anchor-id="using-docker-desktop">Using Docker Desktop</h2>
<ul>
<li><p>After you’ve started your container it will take you to the logs for the container itself.</p></li>
<li><p>Sometimes it is very helpful to be able to access the terminal from inside of a Docker container. Click the tab <code>Terminal</code> this will give you access to the operating system that the container is running.</p></li>
<li><p><code>Files</code> tab will let you navigate the files in the container. Super helpful to verify if you’ve correctly copied files into the correct place.</p></li>
<li><p>Sometimes our Docker images can be bigger than we anticipate. We can inspect the layers to try and identify which instruction is the culprit`.</p></li>
</ul></section><section id="what-should-you-containerize" class="level2"><h2 class="anchored" data-anchor-id="what-should-you-containerize">What should you containerize?</h2>
<p>Web applications! To be overly simplistic, a web app is anything that can be served over http. These are primarily RESTful APIs or interactive applications.</p>
<p>You can also use containers to run scheduled tasks</p>
</section><section id="steps-for-data-scientists" class="level2"><h2 class="anchored" data-anchor-id="steps-for-data-scientists">Steps for Data Scientists</h2>
<p>For the vast majority of scenarios for data scientists we can reduce Docker to 4 steps:</p>
<ol type="1">
<li>Choose an appropriate base image</li>
<li>Install the requisite system dependencies</li>
<li>Install the additional R or Python Packages</li>
<li>Specify an <code>ENTRYPOINT</code> (what to do when the app starts)</li>
</ol></section><section id="plumber-example" class="level2"><h2 class="anchored" data-anchor-id="plumber-example">Plumber Example</h2>
</section><section id="flask-example" class="level2"><h2 class="anchored" data-anchor-id="flask-example">Flask Example</h2>
<p>Things you might put in a Docker container:</p>
<ul>
<li><p>Web-App</p></li>
<li><p>REST API</p></li>
<li><p>an R or Python script that you run on a schedule</p></li>
</ul>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    if (id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        for (let i = 0; i < 2; i++) {
          container.appendChild(note.children[i].cloneNode(true));
        }
        return container.innerHTML
      } else {
        return note.innerHTML;
      }
    } else {
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      try { hash = new URL(url).hash; } catch {}
      const id = hash.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note !== null) {
        try {
          const html = processXRef(id, note);
          instance.setContent(html);
        } finally {
          instance.enable();
          instance.show();
        }
      } else {
        // See if we can fetch this
        fetch(url.split('#')[0])
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.getElementById(id);
          console.log(htmlDoc.body.innerHTML);
          if (note !== null) {
            const html = processXRef(id, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>