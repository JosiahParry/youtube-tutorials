<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>GIS fundamentals:</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="script_files/libs/clipboard/clipboard.min.js"></script>
<script src="script_files/libs/quarto-html/quarto.js"></script>
<script src="script_files/libs/quarto-html/popper.min.js"></script>
<script src="script_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="script_files/libs/quarto-html/anchor.min.js"></script>
<link href="script_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="script_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="script_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="script_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="script_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="script_files/libs/quarto-diagram/mermaid.min.js"></script>
<script src="script_files/libs/quarto-diagram/mermaid-init.js"></script>
<link href="script_files/libs/quarto-diagram/mermaid.css" rel="stylesheet">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
</div>
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">GIS fundamentals:</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Hey, fellow programmers and geospatial nerds. Josiah here. It’s been a while since my last video. The subject for this video is one a topic that feels so rudimentary, but is often skipped over. It’s a fundamental that folks like myself don’t truly learn until later in life. It’s got to do with vector data: points lines and polygons.</p>
<p>I’ve been doing geospatial analysis in some way, shape, or form since 2014. Only recently have I felt I truly understood vector data. We’re going to walk through the <a href="https://www.ogc.org/standard/sfa/">simple feature standard</a> from the <a href="https://www.ogc.org/">Open Geospatial Consortium (OGC)</a>.</p>
<div class="callout-note callout callout-style-simple">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p>The OGC is a neutral organization who’s sole purpose is to bolster and organize the geospatial community through “publicly available and open standards” that drive innovation and ensure interoperability across tech stacks.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
</div>
</div>
</div>
<p>Let’s think about all the different types of data we can gather about the world around us: locations of cities, roads, UFO sightings, rivers, houses, and quite literally anything that can be observed in the world around us (including things on other planets). All of this data can be represented by simple geometry features such as points, lines, and polygons. The Simple Feature Standard gives us a way to do that. The SF standard makes it easy to describe geometries in a consistent way using <strong>geometric primitives</strong> so that they can be understood no matter what programming language or software is being used.</p>
<div class="callout-tip callout callout-style-simple">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p>A geometric primitive is an <strong>atomic</strong> unit. It is the smallest unit that a shape can be broken down into. Geometric primitives are the building blocks for all other geometries.</p>
</div>
</div>
</div>
<section id="simple-feature-standard" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="simple-feature-standard">Simple Feature Standard</h2>
<blockquote class="blockquote">
<p>“This standard enumerates the requirements for defining and representing geographic features in geographic information systems, applications and transmittable data formats.”</p>
</blockquote>
<p>The simple feature standard (SF) defines how vector data is recorded and transmitted. Of course data need to be recorded and transmitted, but is a whole standard really necessary? What does it mean to be a standard and why are they important? Well, that gets to the core of why the OGC exists if you ask me.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p>There could, and maybe should, be a whole video dedicated to the OGC and the work that they do. I’ll provide links in the description and this will be available as a blog on my website.</p>
</div></div><p>OGC standards formalize how something should be built, function, or behave. Because they are generally agreed upon and fairly exhaustive, they ensure that users can expect the same behavior regardless of what tool or language they may be using. Standards are critical for the open source community and commercial entities that rely upon open source. These standards define, in words, how software should behave.</p>
<p>The simple feature (SF) standard is broken up into two parts. The first defines the “common architecture” and the second defines how a SQL interface should interact with the simple features. We don’t care about SQL today. Only about the first part.</p>
<p>We’re going to get quite specific. So get ready for a journey.</p>
</section>
<section id="geometric-primitives" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="geometric-primitives">Geometric Primitives</h2>
<p>Every shape that we work with is composed of other geometric units. These other units are the smallest composible unit we work with. They are called <strong>geometric primitives</strong>. When working with points, lines, and polygons, there is only one primitive that we use. <code>Point</code>s. <code>Point</code>s are the building blocks of (almost) every single geometry that we work with.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p>For the whiz kids out there: I’m referring only to the common geometry objects <code>Point</code>, <code>Line</code>/<code>LineString</code>, <code>Polygon</code> and their <code>Multi</code>-types.</p>
</div></div><p>Point’s are defined by at least two values and up to four. The first two are the most important: the <code>X</code> and <code>Y</code> coordinates. A simple point looks like <code>Point (X Y)</code>. Where <code>X</code> and <code>Y</code> are floating point numbers (they have decimals) representing the respective dimensions. Point have two other optional dimensions <code>Z</code> and <code>M</code>.</p>
<p><code>Z</code> is used for 3-dimensional data. It represents the altitude (height) of a point. For example, the peak of Mount Washington is located at <code>Point (-71.3 44.3)</code> but that ignores the height of the peak which is 6,289. If we wanted to record the elevation that might look like <code>Point (-71.3 44.3 6289)</code>.</p>
<p>The <code>M</code> dimension is for a <strong>measurement</strong>. Mount Washington is known for being ridiculously cold. This year it broke it’s own previous record and clocked in a -108° F measurement. We can actually encode this into a single point measurement. <code>Point (-71.3 44.3 6289 -108)</code>.</p>
<p>The <code>Z</code> and <code>M</code> measurements are exceptionally useful, but less common. Though they are seeing increased use as 3-dimensional data becomes more and more available. For the remainder we’ll only consider points in 2 dimensions.</p>
</section>
<section id="geometry-objects" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="geometry-objects">Geometry Objects</h2>
<p>From points we can create <strong>geometric objects</strong>. Geometric objects represent a single thing—like an intersection location, the path of a river, or the shape of a building. These are all represented by a single geometric objects.</p>
<p>A <code>Point</code> is the most basic geometric object because it is also a geometric primitive.</p>
<blockquote class="blockquote">
<p>Image of a point (0, 0)</p>
</blockquote>
<p>Two <code>Point</code>s connect to make a <code>Line</code>.</p>
<blockquote class="blockquote">
<p>Animates to connect a line (0, 0), (5, 0).</p>
</blockquote>
<p>A <code>Line</code> can only have two points. Whereas the <code>LineString</code> geometric object is defined by two or more points that create a path.</p>
<blockquote class="blockquote">
<p>Animation of adding an additional point</p>
</blockquote>
<div class="callout-note callout callout-style-simple">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p>“A LineString is a Curve with linear interpolation between Points. Each consecutive pair of Points defines a Line segment.” - SFA Part 1: Common Architecture</p>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>It is interpolation and not approximation because the lines <em>must</em> pass through each point.</p>
</div></div><p><code>LineString</code> paths are defined as a sequence of <code>Point</code>s. By adding an increasing number of <code>Point</code>s, you can make <code>LineString</code>s extremely detailed.</p>
<blockquote class="blockquote">
<p>Animation of increasing the number of vertexes in a polygon from 3 to 100 to approximate a circle</p>
</blockquote>
<p>Notice how <code>Point</code>s compose <code>LineString</code>s. Likewise, polygons are composed by <code>LineString</code>s—though not any old <code>LineString</code>. Polygons are closed shapes so they must be defined by a <strong>simple</strong> and <strong>closed</strong> line. Simple and closed <code>LineString</code>s are called <code>LinearRing</code>s.</p>
<blockquote class="blockquote">
<p>Image of simple vs non-simple linear ring</p>
</blockquote>
<p><code>LineString</code>s become closed by adding final closing <code>Point</code> at the starting point. So the starting and the closing point must be identical. There will always be one more point than there are vertexes in polygons.</p>
<blockquote class="blockquote">
<p>image of closed LineString</p>
</blockquote>
<p>To be “simple”, the line must not intersect (or cross) itself at any point. Think of the shape of a country’s border.</p>
<blockquote class="blockquote">
<p>Image of a countries border (bulgaria)</p>
</blockquote>
<p>The shape of a polygon must define an enclosed space. The inside of the polygon is the area defined by the <strong>exterior ring</strong>. But get this: the order of the points in the exterior ring of a polygon matter! Just knowing all of the vertexes in a polygon is not enough. You must also know in which order they go.</p>
<blockquote class="blockquote">
<p>picture of creating a closed line by randomly shuffling the order of vertexes. Also going clockwise vs counter clockwise</p>
</blockquote>
<p>The exterior ring of a polygon must record each vertex in <em>counter clock-wise</em> order.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p>Note that this is the same rotation of the unit circle. Can anyone confirm if this is intentional?</p>
</div></div><div class="callout-tip callout callout-style-simple">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p>This is called the <strong>winding order</strong>.</p>
</div>
</div>
</div>
<p>Here’s another quirk. Polygons can also have <strong>holes</strong> inside of them. Think of a land parcel with a pond in it. Should the body of water be included? Sometimes. Sometimes not. For example if one was interested in only the land area it may be best to include it?</p>
<p>Polygon holes also must be closed and simple <code>LinearRing</code>s. But here’s the catch: they have a different winding order. <strong>Interior rings</strong>, or holes, are recorded with a clockwise winding.</p>
<blockquote class="blockquote">
<p>animation of creating a polygon with CCW exterior ring and a CW interrior ring</p>
</blockquote>
</section>
<section id="multiples" class="level2">
<h2 class="anchored" data-anchor-id="multiples">Multiples</h2>
<p>We’ve now built up each of the major geometric objects from <code>Point</code>s to <code>Polygon</code>s and have seen how smaller units build into larger ones. This concept of making one geometry from another extends into the concept of a <code>GeometryCollection</code>.</p>
<p><code>GeometryCollection</code>s <em>collect</em> multiple geometric objects of any type into one single entity. This alone can be very useful. Though the <code>GeometryCollection</code> actually has three subclasses that are a bit more restrictive.</p>
<p><code>GeometryCollection</code> subclasses start with the <code>Multi</code>- prefix indicating that it contains <em>multiple</em> objects. The <code>Multi</code>- geometry collections differ from the more general <code>GeometryCollection</code> in that they can contain only one type of geometric object. Each geometric object—<code>Point</code>, <code>LineString</code>, and <code>Polygon</code>—have a corresponding <code>Multi</code> type—<code>MultiPoint</code>, <code>MultiLineString</code>, and <code>MultiPolygon</code> respectively.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<p>
</p><pre class="mermaid mermaid-js" data-tooltip-selector="#mermaid-tooltip-1">graph BT
    A[GeometryCollection] 
    MP(MultiPoint) --&gt;  A
    ML(MultiLineString) --&gt; A
    MPLY(MultiPolygon) --&gt; A
    P(Point) --&gt; MP
    L(LineString) --&gt; ML
    PLY(Polygon) --&gt; MPLY
</pre>
<div id="mermaid-tooltip-1" class="mermaidTooltip">

</div>
<p></p>
</div>
</div>
</div>
<section id="multipoint" class="level3">
<h3 class="anchored" data-anchor-id="multipoint"><code>MultiPoint</code></h3>
<p>A <code>MultiPoint</code>, for example, is comprised of one ore more points. Say we have three points <code>Point (0 0)</code>, <code>Point (1 0)</code>, and <code>Point (1 1)</code>. Each of these are considered to be a single <strong>feature</strong>.</p>
<div class="callout-tip callout callout-style-simple">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p>A <em>feature</em> refers to any “phenomena”, or thing, that exists in the real physical world.</p>
</div>
</div>
</div>
<p>But what if each of these points were related to each other? Perhaps each point indicates an emergency exit for a single building. It could be quite useful to track these exits as a single feature. Particularly when our data set may contain hundreds or thousands of building emergency exits. In this case we would represent the feature as a <code>MultiPoint ((0 0), (1 0), (1 1))</code>.</p>
<blockquote class="blockquote">
<p>animation of 3 points being different colors switching to the same color. perhaps a label of Point() Point() Point() to MultiPoint((), (), ())</p>
</blockquote>
</section>
<section id="multilinestring" class="level3">
<h3 class="anchored" data-anchor-id="multilinestring"><code>MultiLineString</code></h3>
<p>Maybe geometry collections of <code>LineString</code>s are more natural to think about. Road networks are a great example where <code>MultiLineString</code>s can be made useful. Roads are classified into different categories. This is the road network of Grafton County, New Hampshire. Not all of these roads are the same type. Some of them are dirt roads that connect to people’s houses and farms. Others are larger two lane roads that act as main thoroughfares, and there are a few interstates interspersed as well.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="script_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>When we symbolize the road network based on the road type, the differences in type become more apparent.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="script_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>There are few U.S. roads and interstates whereas the vast majority of the region is covered in “common name” roads. It may make sense to collect each of the road types into a single <code>MultiLineString</code> geometry collection. A <code>MultiLineString</code>, like the <code>MultiPoint</code>, is composed of many <code>LineString</code>s into a single feature.</p>
</section>
<section id="multipolygon" class="level3">
<h3 class="anchored" data-anchor-id="multipolygon"><code>MultiPolygon</code></h3>
<p><code>MultiPolygon</code>s may be the most common type of geometry collection subclass that we encounter naturally. A really common place where we see multiple polygons being part of the same feature is in political boundaries. Island nations are a really great example of this. Take the Philippines for example.</p>
<p>The Philippines is an archipelago of over 7,000 islands making up an entire nation. Each island is an enclosed polygon. But the collection of polygons is identified collectively as The Philippines.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="script_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<blockquote class="blockquote">
<p>it would be nice to animate each of these to appear one at a time.</p>
</blockquote>
<p>Collecting all of these polygons into a single <code>MultiPolygon</code> is a natural decision given that it represents a single feature.</p>
</section>
<section id="geometrycollection" class="level3">
<h3 class="anchored" data-anchor-id="geometrycollection"><code>GeometryCollection</code></h3>
<p>Each of these subtypes restrict the constituent geometry object types. The general <code>GeometryCollection</code> geometry object has no such limitation.</p>
<blockquote class="blockquote">
<p>A GeometryCollection is a geometric object that is a collection of some number of geometric objects.</p>
</blockquote>
<p>I think of <code>GeometryCollection</code>s as a grab bag of miscellaneous geometry objects. And here’s a fun thing thing. Since <code>GeometryCollection</code>s are geometry objects they can contain <code>GeometryCollection</code>s which can contain another one so on forever and ever—if you ever found an actual use case for them.</p>
<p>Personally, I’ve never found such a use case, or really any uses for a <code>GeometryCollection</code> object other than some intermediate in an analysis.</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>GEOMETRYCOLLECTION (POLYGON ((0 0, 7 0, 7 5, 0 5, 0 0)), LINESTRING (0 8, 0 0, 9 3, 7 3, 8 5), POINT (0 0))</code></pre>
</div>
</div>
</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>https://www.ogc.org/about/<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>